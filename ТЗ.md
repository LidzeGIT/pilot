# Финтех Пилот: API Контракты

## 1. AuthService

**1.1 Регистрация пользователя**
- **Метод:** `POST /auth/register`
- **Тело запроса:**
````json
 {
  "username": "string",
  "password": "string",
  "email": "string"
}
````
- **Ответ:**
````json
{
  "message": "User registered successfully",
  "userId": "string"
}
````
**1.2 Вход в систему**
- **Метод:** `POST /auth/login`
- **Тело запроса:**
````json
 {
  "username": "string",
  "password": "string"
}
````
- **Ответ:**
````json
{
  "accessToken": "string",
  "refreshToken": "string",
  "expiresIn": "integer"
}
````
**1.3 Обновление токена**
- **Метод:** `POST /auth/refresh`
- **Тело запроса:**
````json
{
  "refreshToken": "string"
}
````
- **Ответ:**
````json
{
  "accessToken": "string",
  "expiresIn": "integer"
}
````
**1.4 Отзыв токена**
- **Метод:** `POST /auth/logout`
- **Тело запроса:**
````json
{
  "accessToken": "string"
}
````
- **Ответ:**
````json
{
  "message": "Logout successful"
}
````
## 2. CustomerService
**2.1 Создание клиента**
- **Метод:** `POST /customers`
- **Тело запроса:**
````json
{
  "name": "string",
  "email": "string",
  "phone": "string",
  "address": "string"
}
````
- **Ответ:**
````json
{
  "customerId": "string",
  "message": "Customer created successfully"
}
````
**2.2 Получение информации о клиенте**
- **Метод:** `GET /customers/{customerId}`
- **Тело запроса:**
````json
{
  "customerId": "string",
  "name": "string",
  "email": "string",
  "phone": "string",
  "address": "string"
}
````
- **Ответ:**
````json
{
  "customerId": "string",
  "name": "string",
  "email": "string",
  "phone": "string",
  "address": "string"
}
````

**2.3 Обновление информации о клиенте**
- **Метод:** `PUT /customers/{customerId}`
- **Тело запроса:**
````json
{
  "name": "string",
  "email": "string",
  "phone": "string",
  "address": "string"
}
````
- **Ответ:**
````json
{
  "message": "Customer updated successfully"
}
````

**2.4 Удаление клиента**
- **Метод:** `DELETE /customers/{customerId}`
- **Ответ:**
````json
{
  "message": "Customer deleted successfully"
}
````
**2.5 Получение списка всех счетов пользователя**
- **Запрос**
- **Метод:** `GET /users/{userId}/accounts`
- **Ответ**
- **Статус:** `200 OK`
- **Тело ответа:**
  ````json
  [
      {
      "accountId": "string",
      "accountType": "SAVINGS",
      "balance": 100.00,
      "currency": "USD"
      },
      {
      "accountId": "string",
      "accountType": "CURRENT",
      "balance": 200.00,
      "currency": "EUR"
      }
  ]
  ````

## 3. AccountService
1. **Функциональные требования:**
- **Открытие счета:**
    - Возможность создания различных типов счетов (расчетные, сберегательные, корпоративные и т.д.).
    - Валидация данных (проверка личности, адреса, кредитной истории и т.д.).
- **Закрытие счета:**
    - Возможность инициировать процесс закрытия счета с учетом всех связанных операций.
- **Управление счетами:**
    - Просмотр баланса, транзакций, выписывание выписок по счетам.
- **Переводы:**
    - Возможность быстро и безопасно переводить деньги между счетами (внутри банка и между другими банками).

**3.1. Открытие счета**
- **Запрос**
-  `POST /accounts`
- ****Тело запроса:****
  ````json
  {
  "accountType": "SAVINGS",
  "userId": "string",
  "currency": "USD",
  "initialDeposit": 100.00
  }
  ````
- **Статус:** `201 Created`
- **Тело ответа:**
  ````json
  {
  "accountId": "string",
  "accountType": "SAVINGS",
  "userId": "string",
  "balance": 100.00,
  "currency": "USD",
  "createdAt": "2023-10-01T12:00:00Z"
  }
  ````
**3.2. Получение информации о счете**
- **Запрос**
- **Метод:** `GET /accounts/{accountId}`
- **Статус:** `200 OK`
- **Тело ответа:**
  ````json
  {
  "accountId": "string",
  "accountType": "SAVINGS",
  "userId": "string",
  "balance": 100.00,
  "currency": "USD",
  "createdAt": "2023-10-01T12:00:00Z"
  }
  ````
**3.3. Обновление информации о счете**
- **Запрос**
- **Метод:** `PUT /accounts/{accountId}`
- ****Тело запроса:****
  ````json
  {
  "accountType": "CURRENT",
  "currency": "EUR"
  }
  ````
- **Статус:** `200 OK`
- **Тело ответа:**
  ````json
  {
  "accountId": "string",
  "accountType": "CURRENT",
  "userId": "string",
  "balance": 100.00,
  "currency": "EUR",
  "updatedAt": "2023-10-02T12:00:00Z"
  }
  ````
**3.4. Закрытие счета**
- **Запрос**
- **Метод:** `DELETE /accounts/{accountId}`
- **Статус:** `204 No Content`

**3.5. Перевод между счетами**
- **Запрос**
- **Метод:** `POST /accounts/transfer`
- ****Тело запроса:****
  ````json
  {
  "fromAccountId": "string",
  "toAccountId": "string",
  "amount": 50.00
  }
  ````
- **Статус:** `200 OK`
- **Тело ответа:**
  ````json
  {
  "transferId": "string",
  "fromAccountId": "string",
  "toAccountId": "string",
  "amount": 50.00,
  "timestamp": "2023-10-02T12:00:00Z",
  "status": "COMPLETED"
  }
  ````
## 4. TransactionService

**4.1 Перевод средств**
- **Метод:** `POST /transactions/transfer`
- **Тело запроса:**
````json
{
  "fromAccountId": "string",
  "toAccountId": "string",
  "amount": "number",
  "currency": "string",
  "description": "string"
}
````
- **Ответ:**
````json
{
  "transactionId": "string",
  "message": "Transfer successful"
}
````
**4.2 Получение информации о транзакции**
- **Метод:** `GET /transactions/{transactionId}`
- **Ответ:**
````json
{
  "transactionId": "string",
  "fromAccountId": "string",
  "toAccountId": "string",
  "amount": "number",
  "currency": "string",
  "status": "string",
  "timestamp": "string",
  "description": "string"
}
````
**4.3 Получение истории транзакций**
- **Метод:** `GET /transactions?accountId={accountId}&startDate={date}&endDate={date}`
- **Ответ:**
````json
{
  "transactions": [
    {
      "transactionId": "string",
      "amount": "number",
      "currency": "string",
      "status": "string",
      "timestamp": "string",
      "description": "string"
    }
  ]
}
````
## 5. NotificationService
**5.1 Отправка уведомления**
- **Метод:** `POST /notifications`
- **Тело запроса:**
````json
{
  "recipient": "string",
  "type": "string",
  "message": "string"
} // "SMS", "EMAIL", "PUSH" 
````
- **Ответ:**
````json
{
  "notificationId": "string",
  "message": "Notification sent successfully"
}
````
## 6. LoanService
**6.1 Подача заявки на кредит**
- **Метод:** `POST /loans/apply`
- **Тело запроса:**
````json
{
  "customerId": "string",
  "loanAmount": "number",
  "term": "integer", // в месяцах 
  "interestRate": "number" 
}
````
- **Ответ:**
````json
{
  "loanId": "string",
  "message": "Loan application submitted successfully"
}
````
**6.2 Получение информации о кредите**
- **Метод:** `GET /loans/{loanId}`
- **Ответ:**
````json
{
  "loanId": "string",
  "customerId": "string",
  "loanAmount": "number",
  "term": "integer",
  "interestRate": "number",
  "status": "string",
  "remainingAmount": "number"
}
````
**6.3 Погашение кредита**
- **Метод:** `POST /loans/{loanId}/repay`
- **Тело запроса:**
````json
{
  "amount": "number"
}
````
- **Ответ:**
````json
{
  "message": "Loan repayment successful"
}
````
## 7. CardService
**7.1 Выпуск карты**
- **Метод:** `POST /cards`
- **Тело запроса:**
````json
{
  "customerId": "string",
  "cardType": "string"
} // "DEBIT", "CREDIT" 
````
- **Ответ:**
````json
{
  "cardId": "string",
  "message": "Card issued successfully"
}
````
**7.2 Блокировка карты**
- **Метод:** `POST /cards/{cardId}/block`
- **Ответ:**

````json
{
  "message": "Card blocked successfully"
}
````